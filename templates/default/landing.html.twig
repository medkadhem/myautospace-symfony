{% extends 'base.html.twig' %}

{% block title %}MyAutoSpace - Rent. Buy. Sell.{% endblock %}

{% block body %}
  <section class="hero-section">
    <div class="hero-content">
      <h1 class="hero-title">
        <span>RENT.</span>
        <span class="highlight">BUY.</span>
        <span>SELL.</span>
      </h1>
      <div class="hero-actions">
        <a href="{{ path('app_marketplace', {type: 'listings'}) }}" class="action-link">
          <span class="arrow">‚Üí</span>
          <span>Rent a car</span>
        </a>
        <a href="{{ path('app_marketplace', {type: 'listings'}) }}" class="action-link">
          <span class="arrow">‚Üí</span>
          <span>Buy a car</span>
        </a>
        <a href="{{ path('app_marketplace', {type: 'services'}) }}" class="action-link">
          <span class="arrow">‚Üí</span>
          <span>Browse services</span>
        </a>
      </div>
    </div>
    <div class="hero-image">
      <img src="https://images.unsplash.com/photo-1567818735868-e71b99932e29?w=800&q=80" alt="Sports Car">
    </div>
  </section>

  <section class="about-section">
    <div class="about-content">
      <div class="about-text">
        <h2>About MyAutoSpace</h2>
        <p>Your trusted marketplace for automotive needs in Tunisia. We connect buyers, sellers, and service providers in one seamless platform.</p>
        <p>MyAutoSpace is the leading automotive marketplace offering a comprehensive platform for buying, selling, and renting vehicles. With our extensive network of verified providers and a wide range of professional services, we make automotive transactions simple, secure, and transparent.</p>
      </div>
      <div class="about-text">
        <p>Whether you're looking to purchase your dream car, list your vehicle for sale, or find reliable automotive services, MyAutoSpace has you covered.</p>
        <p>Our platform features {{ activeAnnouncements }} active listings, {{ totalServices }} professional services, and a growing community of automotive enthusiasts. Join thousands of satisfied users who trust MyAutoSpace for their automotive needs.</p>
      </div>
    </div>
  </section>

  <!-- Featured Listings -->
  {% if featuredAnnouncements|length > 0 %}
  <section class="featured-section">
    <div class="container">
      <h2>üî• Featured Listings</h2>
      <p>Check out our latest and most popular vehicles</p>
      
      <div class="vehicles-grid">
        {% for announcement in featuredAnnouncements %}
        <a href="{{ path('app_announcement_show', {id: announcement.id}) }}" class="vehicle-card">
          <div class="vehicle-image">
            {% if announcement.mainPhoto %}
              <img src="{{ asset('uploads/announcements/' ~ announcement.mainPhoto) }}" alt="{{ announcement.title }}">
            {% else %}
              <img src="https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=400&q=80" alt="{{ announcement.title }}">
            {% endif %}
            {% if announcement.isSponsored %}
            <span class="badge">‚≠ê SPONSORED</span>
            {% endif %}
          </div>
          <div class="vehicle-info">
            <h3>{{ announcement.title }}</h3>
            <div class="vehicle-details">
              {% if announcement.brand %}
                <span>üöó {{ announcement.brand }} {{ announcement.model }}</span>
              {% endif %}
              {% if announcement.year %}
                <span>üìÖ {{ announcement.year }}</span>
              {% endif %}
              {% if announcement.mileage %}
                <span>üõ£Ô∏è {{ announcement.mileage|number_format(0, '.', ',') }} km</span>
              {% endif %}
            </div>
            <div class="vehicle-footer">
              <span class="price">{{ announcement.price|number_format(0, '.', ',') }} TND</span>
              <span class="status {{ announcement.status }}">{{ announcement.status|capitalize }}</span>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
      
      <div style="text-align: center; margin-top: 40px;">
        <a href="{{ path('app_marketplace') }}" class="btn yellow">View All Listings ‚Üí</a>
      </div>
    </div>
  </section>
  {% endif %}

  {% if featuredServices|length > 0 %}
  <section class="services-section">
    <h2>üîß Professional Services</h2>
    
    {% for service in featuredServices %}
      <div class="service-item {{ loop.index is even ? 'reverse' : '' }}">
        <div class="service-image">
          {% if service.photo %}
            <img src="{{ asset('uploads/services/' ~ service.photo) }}" alt="{{ service.title }}">
          {% else %}
            <img src="https://images.unsplash.com/photo-{{ ['1552555238-6461a8b80e71', '1517420879524-86d64ac2aea8', '1625231724288-e22032e19fff'][loop.index0 % 3] }}?w=500&q=80" alt="{{ service.title }}">
          {% endif %}
        </div>
        <div class="service-content">
          <h3>{{ service.title }}</h3>
          <p>{{ service.description|length > 200 ? service.description|slice(0, 200) ~ '...' : service.description }}</p>
          <div class="service-pricing">
            <span class="service-price">{{ service.price|number_format(0, '.', ',') }} TND</span>
            {% if service.duration %}
              <span class="service-duration">‚è±Ô∏è {{ service.duration }} min</span>
            {% endif %}
          </div>
          <div class="service-action">
            <a href="{{ path('app_service_show', {id: service.id}) }}" class="btn yellow">View Details ‚Üí</a>
          </div>
        </div>
      </div>
    {% endfor %}
    
    <div style="text-align: center; margin-top: 60px;">
      <a href="{{ path('app_services') }}" class="btn secondary">View All Services ‚Üí</a>
    </div>
  </section>
  {% endif %}

  <section class="stats-section">
    <h2>üìä Our Impact</h2>
    <div class="stats-grid">
      <div class="stat-box">
        <span class="stat-number">{{ totalAnnouncements|number_format(0, '.', ',') }}</span>
        <span class="stat-label">Total Listings</span>
      </div>
      <div class="stat-box">
        <span class="stat-number">{{ activeAnnouncements|number_format(0, '.', ',') }}</span>
        <span class="stat-label">Active Vehicles</span>
      </div>
      <div class="stat-box">
        <span class="stat-number">{{ totalServices|number_format(0, '.', ',') }}</span>
        <span class="stat-label">Services Available</span>
      </div>
      <div class="stat-box">
        <span class="stat-number">{{ totalProviders|number_format(0, '.', ',') }}</span>
        <span class="stat-label">Service Providers</span>
      </div>
      <div class="stat-box">
        <span class="stat-number">{{ totalUsers|number_format(0, '.', ',') }}</span>
        <span class="stat-label">Total Users</span>
      </div>
      <div class="stat-box">
        <span class="stat-number">{{ completedReservations|number_format(0, '.', ',') }}</span>
        <span class="stat-label">Completed Bookings</span>
      </div>
    </div>
    <div class="stats-image">
      <img src="https://images.unsplash.com/photo-1583121274602-3e2820c69888?w=600&q=80" alt="Orange Sports Car">
    </div>
  </section>
{% endblock %}
